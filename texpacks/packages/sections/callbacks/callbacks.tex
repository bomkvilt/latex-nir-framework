\texcode{on}

% >> -----------------------------------------------------------------------------------------------
% >> user interface
% >> -----------------------------------------------------------------------------------------------

% Mark the file as section
\NewDocumentCommand{\sectionfile}{  }
{
    % initialize sections' env
    \@@secs@clb@level@on{s}
    % set a callback that will deinitialize the level
    \registerOnCloseEvent{\@@secs@clb@level@off{s}}
}

% Mark the file as part
\NewDocumentCommand{\partfile}{  }
{
    % initialize sections' env
    \@@secs@clb@level@on{p}
    % set a callback that will deinitialize the level
    \registerOnCloseEvent{\@@secs@clb@level@off{p}}
}


% >> -----------------------------------------------------------------------------------------------
% >> callbacks
% >> -----------------------------------------------------------------------------------------------


% start a new level
% #1 - level's letter
%    s - section
%    p - part   
\NewDocumentCommand{\@@secs@clb@level@on}{ m }
{
    \@@secs@res@frame<#1>{\curbase}{on}
}


\NewDocumentCommand{\@@secs@clb@level@off}{ m }
{
    \@@secs@res@frame<#1>{}{off}
}


\texcode{}
